(function(f){function r(a,b){for(var d in b)b[d]!==void 0&&(a[d]=b[d]);return a}f.utils={escapeHTML:function(a){return(""+a).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace("/&/g","&amp;")},stringify:function(a){if(a===null||a===void 0||typeof a==="number"&&isNaN(a))a={toString:function(){return""}};return a.isRaw?a:f.utils.escapeHTML(a)},raw:function(a){return{isRaw:!0,toString:function(){return a}}},runInsideTemplate:function(a,b){return f.utils.raw(f.run(a,b))}};var h={};f.options={specialChar:"$"}; f.run=function(a,b){return h[a](b)};f.compile=function(a,b,d){b=b||document.getElementById(a).innerHTML;if(!d&&h[a])return h[a];return h[a]=this._compile(b,{},a)};f._compile=function(a,b,d){function h(c,e){for(;e<c.length&&/\s/.test(c.charAt(e));)e++;return e}function l(c,e,a,u){var b=m(c,e+1,"(")+1;g+=a+c.substring(e,b);u&&(g+="{",b=h(c,b+1),b=s(c,b),g+="}");return b}function s(c,e){var a=m(c,e+1,"{");j(e+1,a);return a}function j(c,e){n(o(t(a,c,function(c,a,b,g){n(o(g));if(a.func)return a.func(c, b,e),!a.raw;a.raw&&n(o(a.name))},e)))}function n(c){g+="result += "+c+";\n"}function o(c){return"'"+c.replace(/'/g,"\\'").replace(/\n/g,"\\n")+"'"}function m(c,e,a){var b=1,g=0,f=a==="("?")":"}",p=-1;t(c,e,function(c,e,d){e.name===f&&g++;e.name===a&&b++;if(g===b)return p=d,!0});if(p>-1)return p;throw Error("(FluidTemplate) template '"+d+"': syntax error at line "+q.toLine(e)+": '"+a+'" is not closed!');}function t(c,e,a,b){for(var g=!1,d="",f="";e<c.length&&(!b||e<b);){var i=c.charAt(e);if(i==="\\"&& !g)g=!0;else if(g)g=!1,d+=i;else{f+=i;a:{var i=f,h=void 0;for(h in k){if(k[h].name===i){i=k[h];break a}if(k[h].name.indexOf(i)===0){i="maybe";break a}}i=!1}if(i!=="maybe")if(i.name){if(a(c,i,e,d))return"";d=f=""}else d+=f,f=""}e++}return d}var b=r(r({},f.options),b||{}),d=d||"",g="var raw = window.FluidTmpl.utils.raw; var run = window.FluidTmpl.utils.runInsideTemplate; var compile = window.FluidTmpl.compile;";g+="var _name = '"+d+"';var _line=0;try { var result = ''; _ = _ || {};";var q={indexes:[], toLine:function(c){for(var e=this.indexes.sort(function(c,a){return c-a}),a=1,b=0;b<e.length;b++){if(e[b]>=c)break;a++}return a}},k=[{name:b.specialChar+"(",func:function(c,a,b){var d=m(c,a+1,"(");g+="result += window.FluidTmpl.utils.stringify(("+c.substring(a+1,d)+"));";j(d+1,b)}},{name:b.specialChar+"if(",func:function(c,a,b){var a=l(c,a,"if",!0),d=h(c,a+1);c.indexOf("else",d)===d&&(g+="else {",d=h(c,d+4),a=s(c,d),g+="}");j(a+1,b)}},{name:b.specialChar+"for(",func:function(a,b,d){a=l(a,b,"for", !0);j(a+1,d)}},{name:b.specialChar+"while(",func:function(a,b,d){a=l(a,b,"while",!0);j(a+1,d)}},{name:")",raw:!0},{name:"(",raw:!0},{name:"{",raw:!0},{name:"}",raw:!0},{name:"\n",raw:!0,func:function(a,b){q.indexes.push(b);g+="_line="+q.toLine(b)+";"}}];j(0);g+=";} catch(e) { var ne = new Error('(FluidTemplate) template \\'' + _name + '\\': error at line ' + _line + ', cause: ' + e.message); ne.cause = e; throw ne; } return result;";return function(a){var b=new Function("_",g);if(a!==void 0&&a!== null){if(a.constructor===Array){for(var d="",f=0;f<a.length;f++)d+=b(a[f]);return d}if(a.constructor===Object)return b(a)}return""}}})(window.FluidTmpl=window.FluidTmpl||{});