(function(h){function p(b,a){for(var f in a)a[f]!==void 0&&(b[f]=a[f]);return b}h.utils={escapeHTML:function(b){if(b.isRaw)return b.toString();return(""+b).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace("/&/g","&amp;")},raw:function(b){return{isRaw:!0,toString:function(){return b}}},runInsideTemplate:function(b,a){return h.utils.raw(h.run(b,a))}};var i={};h.options={specialChar:"$"};h.run=function(b,a){return i[b](a)};h.compile=function(b,a,f){a=a||document.getElementById(b).innerHTML;if(!f&&i[b])return i[b]; return i[b]=this._compile(a)};h._compile=function(b,a){function f(d,e){for(;e<d.length&&/\s/.test(d.charAt(e));)e++;return e}function i(d,e,s,l){var a=m(d,e+1,"(")+1;g+=s+d.substring(e,a);l&&(g+="{",a=f(d,a+1),a=q(d,a),g+="}");return a}function q(d,e){var a=m(d,e+1,"{");k(e+1,a);return a}function k(d,e){n(o(r(b,d,function(d,a,b,c){n(o(c));if(a.func)return a.func(d,b,e),!0;a.raw&&n(o(a.name))},e)))}function n(d){g+="result += "+d+";\n"}function o(d){return"'"+d.replace(/'/g,"\\'").replace(/\n/g,"\\n")+ "'"}function m(d,e,a){var b=1,c=0,g=a==="("?")":"}",f=-1;r(d,e,function(d,e,h){e.name===g&&c++;e.name===a&&b++;if(c===b)return f=h,!0});if(f>-1)return f;throw{message:a+" at index "+e+" is not closed !"};}function r(d,a,b,l){for(var f=!1,g="",h="";a<d.length&&(!l||a<l);){var j=d.charAt(a);if(j==="\\"&&!f)f=!0;else if(f)f=!1,g+=j;else{h+=j;a:{var j=h,i=void 0;for(i in c){if(c[i].name===j){j=c[i];break a}if(c[i].name.indexOf(j)===0){j="maybe";break a}}j=!1}if(j!=="maybe")if(j.name){if(b(d,j,a,g))return""; g=h=""}else g+=h,h=""}a++}return g}var a=p(p({},h.options),a||{}),g="var raw = window.FluidTmpl.utils.raw; var run = window.FluidTmpl.utils.runInsideTemplate; var compile = window.FluidTmpl.compile;";g+="var result = ''; _ = _ || {};";var c={};c[a.specialChar+"("]={name:a.specialChar+"(",func:function(d,a,b){var f=m(d,a+1,"(");g+="result += window.FluidTmpl.utils.escapeHTML(("+d.substring(a+1,f)+"));";k(f+1,b)}};c[a.specialChar+"if("]={name:a.specialChar+"if(",func:function(a,e,b){var e=i(a,e,"if", !0),c=f(a,e+1);a.indexOf("else",c)===c&&(g+="else {",c=f(a,c+4),e=q(a,c),g+="}");k(e+1,b)}};c[a.specialChar+"for("]={name:a.specialChar+"for(",func:function(a,e,b){a=i(a,e,"for",!0);k(a+1,b)}};c[a.specialChar+"while("]={name:a.specialChar+"while(",func:function(a,b,c){a=i(a,b,"while",!0);k(a+1,c)}};c[")"]={name:")",raw:!0};c["("]={name:"(",raw:!0};c["{"]={name:"{",raw:!0};c["}"]={name:"}",raw:!0};k(0);g+="; return result;";return function(a){var b=new Function("_",g);if(a!==void 0&&a!==null){if(a.constructor=== Array){for(var c="",f=0;f<a.length;f++)c+=b(a[f]);return c}if(a.constructor===Object)return b(a)}return""}}})(window.FluidTmpl=window.FluidTmpl||{});