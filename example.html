<html>
	<head>
		<script type="text/javascript" src="fluidtmpl.js"></script>
	</head>
	<body>
		<ul id="destination">
			
		</ul>
		<script type="text/html" id="band">
			<li>
				<dl>
					<dt>$(_.name)</dt>
					<dd>$(_.genre)</dd>
				</dl>
			</li>
		</script>
		<script type="text/html" id="myTemplate">
			<li>
				Favorite bands of $(_.sex === "M" ? "Mr." : "Mrs.") $(_.name) : $if(_.bands) { ($(_.bands.length)) }
				$if(_.bands) {
					<ul>
						$(run("band", _.bands))
					</ul>
				} else {
					(Unknown)
				}
			</li>
		</script>
		<script type="text/javascript">
			FluidTmpl.compile("band")
			var template = FluidTmpl.compile("myTemplate")
			document.getElementById("destination").innerHTML = template([
				{
					name: "Joe",
					sex: "M",
					bands: [
						{
							name: "Gojira",
							genre: "Death Metal"
						},
						{
							name: "Metallica",
							genre: "Thrash Metal"
						}
					]
				},
				{
					name: "Alice",
					sex: "F",
					bands: [
						{
							name: "The Dandy Warhols",
							genre: "Rock"
						},
						{
							name: "Rodrigo & Gabriela",
							genre: "Folk"
						}
					]
				},
				{
					name: "Vince",
					sex: "M"
				}
			]);
			// you can reuse it with:
			// FluidTmpl.run("myTemplate", myData)
		</script>
	</body>
</html>